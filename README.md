# HWs for the ML in production course

[Vladislav Melnichuk (v_mk_s)](<https://github.com/made-ml-in-prod-2022/v_mk_s>)

В прошлом ДЗ вы обучили модель для решения задачи классификации(по умолчанию использовался датасет https://www.kaggle.com/datasets/cherngs/heart-disease-cleveland-uci), ваше следующее задание, это обернуть ее в вид, пригодный для использования в режиме онлайн

Весь код должен находиться в том же репозитории, но в отдельной папке online_inference. 

**Основная часть**

1) Оберните inference вашей модели в rest сервис на FastAPI, должен быть endpoint /predict (3 балла)
2) Напишите endpoint /health (1 балл), должен возращать 200, если ваша модель готова к работе (такой чек особенно актуален если делаете доп задание про скачивание из хранилища) 
3) Напишите unit тест для /predict  (3 балла) (https://fastapi.tiangolo.com/tutorial/testing/, https://flask.palletsprojects.com/en/1.1.x/testing/)

4) Напишите скрипт, который будет делать запросы к вашему сервису -- 2 балла

5) Напишите dockerfile, соберите на его основе образ и запустите локально контейнер(docker build, docker run), внутри контейнера должен запускать сервис, написанный в предущем пункте, закоммитьте его, напишите в readme корректную команду сборки (4 балл)

6) опубликуйте образ в https://hub.docker.com/, используя docker push (вам потребуется зарегистрироваться) (+2 балла)

7) напишите в readme корректные команды docker pull/run, которые должны привести к тому, что локально поднимется на inference ваша модель (1 балл)
   Убедитесь, что вы можете протыкать его скриптом из пункта 3

8) проведите самооценку(распишите в реквесте какие пункты выполнили и на сколько баллов, укажите сумму баллов) -- 1 балл


**Дополнительная часть**: 
1) Ваш сервис скачивает модель из S3 или любого другого хранилища при старте, путь для скачивания передается через переменные окружения (+2 доп балла)
2) Оптимизируйте размер docker image (+2 доп балла) (опишите в readme.md что вы предприняли для сокращения размера и каких результатов удалось добиться -- должно получиться мини исследование, я сделал тото и получился такой-то результат)
https://docs.docker.com/develop/develop-images/dockerfile_best-practices/
3) Сделайте валидацию входных данных https://pydantic-docs.helpmanual.io/usage/validators/
    (например, порядок колонок не совпадает с трейном, типы, допустимые максимальные и минимальные значения, проявите фантазию, это доп. баллы, проверка не должна быть тривиальной)  (вы можете сохранить вместе с моделью доп информацию, о структуре входных данных, если это нужно) -- 2 доп балла
https://fastapi.tiangolo.com/tutorial/handling-errors/ -- возращайте 400, в случае, если валидация не пройдена

**Процедура сдачи**:

После выполнения ДЗ создаем пулл реквест, в ревьюеры добавляем  Mikhail-M, ждем комментариев (на которые нужно ответить) и/или оценки.
Ветка должна называться homework2.

**Сроки выполнения**:

Мягкий дедлайн: 30 мая 23:59

Жесткий дедлайн:  6 июня 23:59

После мягкого дедлайна все полученные баллы умножаются на 0.6


